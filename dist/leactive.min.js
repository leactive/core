/*!
 * @leactive/core v0.0.0
 * (c) 2018 - Present, Eduard Troshin
 * Released under the MIT License.
 */
var Leactive=function(e){"use strict";function t(e){return"[object Object]"===Object.prototype.toString.call(e)}var n="WILDCARD",r="state";function o(e){return function(t){var n=e.map(function(e){return e(t)});return function(t){for(var r=0;e.length>r;)t.value=n[r](t),r++;return t.value}}}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=Object.defineProperty,c=new Set;function a(e){var a=e.state,f=e.middlewares,d=void 0===f?[]:f;if(!t(a))throw new TypeError("[@leactive/core]: options.state should be a plain object, you passed: "+(void 0===a?"undefined":i(a)));if(!Array.isArray(d))throw new TypeError("[@leactive/core]: options.middlewares should be an array, you passed: "+(void 0===d?"undefined":i(d)));var s=void 0,l=!1,v=new Set,y=new Set,b=Object.create(null),p=Object.create(null),S={set:h,get:function(e){return b[e]},getState:function(){return s},subscribe:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c;if(n=e,"function"!=typeof n)throw new TypeError("[@leactive/core]: Store listener should be a function, you passed: "+(void 0===e?"undefined":i(e)));var n;return t.forEach(function(t){(p[t]||(p[t]=new Set)).add(e)}),{unsubscribe:function(){t.forEach(function(t){p[t].delete(e)})}}},replaceState:j,notifyListeners:g,recordDependencies:function(e){return(v=new Set).add(r),l=!0,e(),l=!1,v}},w=o(d)(S);function h(e,n){var r=b[e],o=w({key:e,value:n});o===r||o!=o&&r!=r||(t(o)&&E(o,e),b[e]=o,g(e))}function m(e){return l&&v.add(e),b[e]}function j(e){E(s=w({key:r,value:e}),r),g(r)}function g(e){var t=p[e];t&&t.forEach(function(t){return t(s,e)}),y.forEach(function(t){return t(s,e)})}function E(e,n){for(var r=Object.keys(e),o=r.length;o--;){var i=r[o],c=n+"/"+i,a=e[i];b[c]=a,u(e,i,{get:m.bind(void 0,c),set:h.bind(void 0,c)}),t(a)&&E(a,c)}}return p[n]=y,j(a),S}function f(e,t){for(var n={},r=Object.keys(e),o=r.length;o--;){var i=r[o];n[i]=e[i].bind(void 0,t)}return n}c.add(n);var d={createStore:a,bindActions:f,composeMiddlewares:o};return e.createStore=a,e.bindActions=f,e.composeMiddlewares=o,e.default=d,e}({});
